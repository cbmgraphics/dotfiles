lC.prototype.Vi=ea(105,function(){return T(this,2)});BM.prototype.Vi=ea(104,g("F"));$Y.prototype.Vi=ea(103,function(){return T(this,1)});bZ.prototype.Vi=ea(102,function(){return T(this,1)});cZ.prototype.Vi=ea(101,function(){return T(this,2)});gZ.prototype.Vi=ea(100,function(){return T(this,1)});oZ.prototype.Vi=ea(99,function(){return T(this,1)});
AZ.prototype.Vi=ea(98,function(a){var b=this,c=new Mz;c.Wh=!0;var d=c.serialize(a);return new Qe(function(a,f){BZ(b,"/dbx/getExecutionStatus",d,function(b){c.Wh=!1;b=c.jd(oZ.Ba(),b.Ve());a(b)},function(){f()})})});function d8d(a,b){var c=new Mz;c.Wh=!0;var d=c.serialize(b);return new Qe(function(b,f){BZ(a,"/dbx/createQuery",d,function(a){c.Wh=!1;a=c.jd($Y.Ba(),a.Ve());3==a.Vi().getState()?f(a):b(a)},function(){var a=new $Y,b=new Vz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}
function e8d(a,b){var c=new Mz;c.Wh=!0;var d=c.serialize(b);return new Qe(function(b,f){BZ(a,"/dbx/previewQuery",d,function(a){c.Wh=!1;a=c.jd(bZ.Ba(),a.Ve());3==a.Vi().getState()?f(a):b(a)},function(){var a=new bZ,b=new Vz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}
function f8d(a,b){var c=new Mz;c.Wh=!0;var d=c.serialize(b);return new Qe(function(e,f){BZ(a,"/dbx/refreshSheets",d,function(a){c.Wh=!1;a=c.jd(O8c.Ba(),a.Ve());Xv(a,1).some(function(a){return 3==a.Vi().getState()})?f(a):e(a)},function(){var a=new O8c,c=new Vz;c.tb(3);U(c,2,1);Xv(b,1).forEach(function(b){var d=new cZ;U(d,1,b);U(d,2,c);Vv(a,1,d)});f(a)})})}
function g8d(a,b){var c=new Mz;c.Wh=!0;var d=c.serialize(b);return new Qe(function(b,f){BZ(a,"/dbx/editQuery",d,function(a){c.Wh=!1;a=c.jd(gZ.Ba(),a.Ve());3==a.Vi().getState()?f(a):b(a)},function(){var a=new gZ,b=new Vz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}function h8d(a){var b=new Mz;return new Qe(function(c,d){Dw(tu(Ew(Ax(uu(a.C.$e("/dbx/listConnections"),"GET")),1).setTimeout(3E4),function(a){b.Wh=!1;a=b.jd(X8c.Ba(),a.Ve());c(a)}),d).Ie()})}
function i8d(a,b){var c=new Mz;c.Wh=!0;var d=Lo(c.serialize(b));return new Qe(function(b,f){Dw(tu(ox(Ew(Ax(uu(a.C.$e("/dbx/getQuery"),"POST")),1).setTimeout(3E4),["data",d]),function(a){c.Wh=!1;a=c.jd(k9c.Ba(),a.Ve());T(a,1)?b(a):f("Query is not found")}),f).Ie()})}
function j8d(a,b){var c=new Mz;c.Wh=!0;var d=c.serialize(b);return new Qe(function(b,f){BZ(a,"/dbx/getBigQueryProjects",d,function(a){c.Wh=!1;a=c.jd(mZ.Ba(),a.Ve());a.Ct()&&f(a);b(a)},function(){var a=new bZ,b=new Vz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}function k8d(a,b){var c=new Mz;c.Wh=!0;var d=c.serialize(b);return new Qe(function(b,f){BZ(a,"/dbx/getConnection",d,function(a){c.Wh=!1;a=c.jd(r9c.Ba(),a.Ve());b(a)},function(){f()})})}function l8d(a){nf(this,a,0,-1,null,null)}w(l8d,mf);function m8d(a,b,c){b=void 0===b?"":b;c=void 0===c?"dataconnector-querytype-raw":c;this.C=[];for(var d=0;d<a.length;d++)this.C.push(a[d].clone());this.F=b;this.D=c};function n8d(){var a='<div class="'+Q("waffle-dataconnector-footer-sharing-message")+'">';return P(a+'<span>The data you query is visible to everyone with view access, but your query is only visible to people with edit access. <a href="https://sites.google.com/corp/google.com/sheets-data-connectors-tt-help/home" target="_blank">Learn more</a></span></div>')};function o8d(a){a=a.TDb;var b='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-section")+'"><h3 class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-header")+'">';b=b+"Billing project"+('</h3><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper")+'"></div>'+(a?'<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-radio-group")+'"><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")+
'"></div><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")+'"></div></div>':"")+"</div>");return P(b)}function p8d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper")+'"><p>';a=a+'Your use of BigQuery is governed by the Google Cloud Platform <a href="https://cloud.google.com/terms/" target="_blank">Terms of Service</a>.'+("</p></div>"+O(n8d(null,b)));return P(a)};function q8d(){return P('<svg class="waffle-dataconnector-database-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#000" fill-rule="evenodd"><ellipse cx="9" cy="5" rx="7" ry="3"/><path d="M16,7 L16,8.99999983 C16,10.6568542 12.8659932,12 9,12 C5.13400675, 12 2,10.6568542 2,9 L2,7 C2,8.65685425 5.13400675,10 9,10 C12.8659932,10 16,8.65685425 16,7 Z"/><path d="M16,11 L16,12.9999998 C16,14.6568542 12.8659932,16 9,16 C5.13400675,16 2,14.6568542 2,13 L2,11 C2,12.6568542 5.13400675,14 9,14 C12.8659932,14 16,12.6568542 16,11 Z"/></g></svg>')}
function r8d(a){a=a||{};var b=a.color;a="";b=Ys(b,null)?"#D0021B":b;a+='<svg class="waffle-dataconnector-error-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="'+Q(b)+'" fill-rule="evenodd" d="M9,13 L11,13 L11,15 L9,15 L9,13 Z M9,5 L11,5 L11,11 L9,11 L9,5 Z M9.99,0 C4.47,0 0,4.48 0,10 C0,15.52 4.47,20 9.99,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 9.99,0 Z M10,18 C5.58,18 2,14.42 2,10 C2,5.58 5.58,2 10,2 C14.42,2 18,5.58 18,10 C18,14.42 14.42,18 10,18 Z"></path></g></svg>';
return P(a)}
function s8d(){return P('<svg class="waffle-dataconnector-bigquery-icon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="#000000" fill-rule="evenodd" d="M17.6210231,14.9676464 C17.7267041,14.964158 17.8336481,14.999598 17.9136667,15.0739664 L21.2187334,18.1431672 C21.3715333,18.2853017 21.3715333,18.5181274 21.2187334,18.6604475 L19.8908,19.8929813 C19.7375334,20.0356729 19.4867333,20.0356729 19.3334666,19.8929813 L16.0288667,16.8252043 C15.9483809,16.7504669 15.9100327,16.6511429 15.9138223,16.5530387 C14.5318646,17.5088871 12.8185327,18.0746254 10.962963,18.0746254 C6.38121025,18.0746254 2.66666667,14.6253786 2.66666667,10.3707987 C2.66666667,6.11585235 6.38121025,2.66666667 10.962963,2.66666667 C15.5447814,2.66666667 19.259325,6.11585235 19.2592593,10.3708597 C19.2592593,12.0936892 18.6501585,13.6844725 17.6210231,14.9676464 Z M10.9627632,16.1481946 C14.3991593,16.1481946 17.1851852,13.5615621 17.1851852,10.3706486 C17.1851852,7.17973497 14.3992258,4.59254616 10.9627632,4.59254616 C7.52630064,4.59254616 4.74074074,7.17967314 4.74074074,10.3706486 C4.74074074,13.561624 7.52630064,16.1481946 10.9627632,16.1481946 Z M6.81481481,10.3703704 L8.88888889,10.3703704 L8.88888889,14.0029401 C8.03391111,13.6464441 7.31942754,13.1505168 6.81481481,12.5594013 L6.81481481,10.3703704 Z M9.92592593,8.44442896 L12,8.44442896 L12,14.1665272 C11.6766072,14.200082 11.3475683,14.2222532 11.0093815,14.2222532 C10.6390341,14.2222532 10.2784063,14.1975885 9.92592593,14.1574203 L9.92592593,8.44442896 Z M13.044326,11.3333411 L15.1184,11.3333411 L15.1184,12.4901418 C14.6287957,13.0790718 13.9116201,13.5742789 13.044326,13.933362 L13.044326,11.3333411 Z"></path></g></svg>')}
function t8d(a){a=a||{};var b=a.opacity;a="";b=Ys(b,null)?1:b;a+='<svg class="waffle-dataconnector-menu-icon" fill="#000000" fill-opacity="'+Q(b)+'" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>';return P(a)};function u8d(){var a=P,b='<div class="'+Q("waffle-dataconnector-modal-header")+'"><div class="'+Q("waffle-dataconnector-modal-title")+'" role="heading"></div><div class="'+Q("waffle-dataconnector-modal-close-button")+'" tabindex="0" role="button">';var c=P('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>');
return a(b+c+'</div></div><div class="'+Q("waffle-dataconnector-modal-body")+'"></div><div class="'+Q("waffle-dataconnector-modal-footer")+'"></div>')};function x4(a,b){a=void 0===a?"":a;rt.call(this,!1,b);this.xb=a;this.C=new $r(void 0,v8d.getInstance());this.Ga(this.C);vn(this.C,"Close");this.qb=null;this.fb=!0}r(x4,rt);p=x4.prototype;
p.Ca=function(){rt.prototype.Ca.call(this);var a=this.getId();Dk(this.Oa(),"labelledby",a);Ck(this.Oa(),"dialog");J(this.getElement(),"waffle-dataconnector-modal");this.xb&&J(this.getElement(),this.xb);Qs(this.getElement(),u8d);this.Ja("waffle-dataconnector-modal-title").id=a;a=this.Oq();J(a,"waffle-dataconnector-modal-bg");K(a,this.fb);this.C.Va(this.Ja("waffle-dataconnector-modal-close-button"));this.qb&&w8d(this)};
p.Ia=function(){rt.prototype.Ia.call(this);x8d(this);this.getHandler().V(this.C,"action",this.FX);this.getHandler().V(this.Oa(),["keydown","keypress"],this.YHb)};p.rb=function(){return this.hb("waffle-dataconnector-modal-body")};function y8d(a){return a.hb("waffle-dataconnector-modal-footer")}function z8d(a,b){a.qb=b;a.sb()&&w8d(a)}function x8d(a){var b=a.qa(),c=a.Oq(),d=a.Qo;a.fb?(d&&b.Tq(d,a.getElement()),b.Tq(c,a.getElement())):(b.sf(d),b.sf(c))}p.FX=function(){Nsb.zb()};p.L5=function(){Nsb.zb()};
p.YHb=function(a){"keydown"==a.type?27==a.keyCode?this.L5():9==a.keyCode&&a.shiftKey&&a.target==this.getElement()&&GRa(this):this.XEa(a)};function w8d(a){Vl.getInstance().setContent(a.Ja("waffle-dataconnector-modal-title"),a.qb)}p.XEa=ba();function v8d(){}r(v8d,Zr);v8d.prototype.gp=n("waffle-dataconnector-modal-close-button");va(v8d);function y4(a,b){x4.call(this,a,b);this.H=Ve()}r(y4,x4);p=y4.prototype;p.getResult=function(){return this.H.C};p.resolve=function(a){this.H.resolve(a)};p.reject=function(a){this.H.reject(a)};p.Ha=function(){x4.prototype.Ha.call(this);this.H.reject()};p.L5=function(){this.reject()};p.FX=function(){this.reject()};var A8d=new cv(1);function B8d(a){var b=1024<=a;a=b?T0c(parseInt(a,10)):a;return(new ev("{AT_LEAST_ONE_KB, select, \n     true {Will process {BYTES}.}\n     other {\n         {BYTES, plural,\n             =0 {Will process # bytes.}\n             =1 {Will process # byte.}\n             other {Will process # bytes.}}}}")).format({AT_LEAST_ONE_KB:b?"true":"false",BYTES:a})}
function C8d(){var a=new rr,b="Configure a project in the Google Cloud Platform console to continue. "+(a.le("a",{"class":"goog-inline-block",href:"https://sites.google.com/corp/google.com/sheets-data-connectors-tt-help/bigquery-projects",target:"_blank"})+("Learn more"+a.re("a")));return a.format(b)};function D8d(a,b){y4.call(this,"waffle-dataconnector-bigqueryquerysettingsdialog",b);z8d(this,this.qa().Ca("SPAN",void 0,N(s8d),"BigQuery data connection"));this.J=a.C;this.D=new yU;this.Ga(this.D);this.D.Bd("waffle-dataconnector-bigqueryquerysettingsdialog-project-select");vn(this.D,"Billing project");a=this.D;a.F="Select a project";a.Cx();this.L=new WX(this.qa(),"Raw data");this.ma=new WX(this.qa(),"Pivot table");this.O=new XX([this.L,this.ma]);this.F=new YY("Write query");this.Ga(this.F);this.F.Bd("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button")}
r(D8d,y4);
D8d.prototype.Ca=function(){y4.prototype.Ca.call(this);var a=I(H(),"fedp");Qs(this.rb(),o8d,{TDb:a});y8d(this).appendChild(N(p8d));this.D.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper"));this.F.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper"));a&&(this.L.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")),this.ma.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")),YX(this.O,
this.L))};D8d.prototype.Ia=function(){y4.prototype.Ia.call(this);if(0==this.J.length){this.D.Pa(!1);var a=this.D;a.F="No billing projects";a.Cx();a=this.qa();var b=se(a,C8d());a.appendChild(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-section"),a.Ca("DIV","waffle-dataconnector-bigqueryquerysettingsdialog-error-caption",b))}else{a=this.J;for(b=0;b<a.length;b++){var c=a[b];this.D.ad(new In(E8d(c),c.getId()))}this.getHandler().V(this.F,"action",this.Da).V(this.D,"change",this.va)}this.va()};
D8d.prototype.va=function(){this.F.Pa(null!=this.D.Re())};D8d.prototype.Da=function(){this.resolve(F8d(this))};function F8d(a){var b=a.D.Re().getValue(),c="dataconnector-querytype-raw";I(H(),"fedp")&&"Pivot table"==ZX(a.O).getLabel()&&(c="dataconnector-querytype-pivot");return new m8d(a.J,b,c)}function E8d(a){var b=a.getName();a=a.getId();return b+" ["+a+"]"};function G8d(a){this.C=a}function H8d(a){var b=new e9c;return j8d(a.C,b).then(function(a){return Xv(a,4)})};function z4(a,b){st.call(this,"waffle-dataconnector-prompt",a,b);this.L=Ve();Et(this,null);Dt(this,!0);this.C=new xX("Continue");this.Ga(this.C);this.J=new yX("Cancel");this.Ga(this.J);this.O=[]}r(z4,st);p=z4.prototype;p.Bd=function(a){this.O.push(a);var b=this.getElement();b&&J(b,a)};p.getResult=function(){return this.L.C};p.resolve=function(a){this.L.resolve(a)};p.reject=function(){this.L.reject()};p.Ca=function(){st.prototype.Ca.call(this);var a=xt(this);this.J.render(a);this.C.render(a);K(a,!0)};
p.Ia=function(){var a=this;st.prototype.Ia.call(this);Jk(this.Oa(),this.O);this.getHandler().V(this.J,"action",function(){return a.reject()})};p.setVisible=function(a){st.prototype.setVisible.call(this,a);a||this.reject()};p.Ha=function(){st.prototype.Ha.call(this);this.reject()};function I8d(a,b){z4.call(this,a,b)}r(I8d,z4);I8d.prototype.Ia=function(){var a=this;z4.prototype.Ia.call(this);this.getHandler().V(this.C,"action",function(){return a.resolve(0)})};function J8d(a){return P('<div class="'+Q("waffle-dataconnector-connectioncard")+'" role="button" tab-index="0"><div class="'+Q("waffle-dataconnector-connectioncard-icon")+'"></div><div class="'+Q("waffle-dataconnector-connectioncard-body")+'"><div class="'+Q("waffle-dataconnector-connectioncard-header")+'">'+O(a.Lda)+'</div><div class="'+Q("waffle-dataconnector-connectioncard-type")+'">'+O(a.y1a)+"</div></div></div>")};function K8d(){}r(K8d,Zr);K8d.prototype.Ca=function(a){a=a.Sa();return N(J8d,{Lda:a.getName(),y1a:"SQL"})};K8d.prototype.Pb=n("waffle-dataconnector-connectioncard");va(K8d);function L8d(a,b){$r.call(this,void 0,K8d.getInstance(),b);this.gc(a);this.Te(8,!0)}r(L8d,$r);L8d.prototype.gc=function(a){$r.prototype.gc.call(this,a)};function M8d(){var a='<div class="'+Q("waffle-dataconnector-connectionmanager-content")+'"><div class="'+Q("waffle-dataconnector-connectionmanager-header")+'">';a=a+"Choose a data source"+('</div><div class="'+Q("waffle-dataconnector-connectionmanager-connections")+'"></div></div>');return P(a)};function N8d(a){y4.call(this,"waffle-dataconnector-connectionmanager",a);z8d(this,this.qa().Ca("SPAN",void 0,N(q8d),"Managed data sources"));this.D=new M(this.qa());this.Ga(this.D);this.F=new aY;this.Ga(this.F);this.L=AZ.getInstance()}r(N8d,y4);N8d.prototype.Ca=function(){y4.prototype.Ca.call(this);Qs(this.rb(),M8d);y8d(this).appendChild(N(n8d));this.F.render(this.Ja("waffle-dataconnector-connectionmanager-content"))};
N8d.prototype.Ia=function(){var a=this;y4.prototype.Ia.call(this);this.D.Va(this.Ja("waffle-dataconnector-connectionmanager-connections"));this.getHandler().V(this.D,"action",this.J);O8d(this,!0);h8d(this.L).then(function(b){var c=Xv(b,1);b=a.Ja("waffle-dataconnector-connectionmanager-connections");if(0==c.length){var d=new rr,e="You do not have access to any managed data sources. "+(d.le("a",{"class":"goog-inline-block",href:"https://sites.google.com/corp/google.com/dataconnectors/home",target:"_blank"})+
("Learn more"+d.re("a")));c=a.qa();d=se(c,d.format(e));c.appendChild(b,c.Ca("DIV","waffle-dataconnector-connectionmanager-no-connections-message",d));K(a.Ja("waffle-dataconnector-connectionmanager-header"),!1)}else for(c=ia(c),d=c.next();!d.done;d=c.next())d=new L8d(d.value),a.D.Ga(d),d.render(b);O8d(a,!1)},function(){O8d(a,!1);mr.getInstance().postMessage(or("Could not get managed data sources","error",!0))})};
function O8d(a,b){Mk(a.Oa(),"waffle-dataconnector-connectionmanager-loading",b);a.F.setActive(b)}N8d.prototype.J=function(a){a.stopPropagation();this.resolve(a.target.Sa())};function P8d(){y.call(this);this.C={};this.D=new Mz}r(P8d,y);function Q8d(a,b,c){a.C[b]=c}function R8d(a,b){var c=ritz_api.DbxApi.getExecutionStatusForQuery(b);c=null==c?null:a.D.jd(Vz.Ba(),c);var d=a.C[b];return d?c&&d.getToken()==c.getToken()?(rc(a.C,b),c):d:c};function S8d(a){y.call(this);this.F=a;this.D=new E;this.xa(this.D);this.C=[]}r(S8d,y);function T8d(a){return 0<a.C.length?Sa(a.C):null}function A4(a,b,c){void 0===c||c?U8d(a):(c=T8d(a))&&c.setVisible(!1);b.Jd(a.D);b instanceof st?a.F.Bh(b):(c=new dIb(b),c.Jd(a.D),a.F.Bh(c));b.render();b.setVisible(!0);a.C.push(b)}function V8d(a){var b=a.C.pop();for(A(b);0<a.C.length;)if(b=Sa(a.C),b.isDisposed())a.C.pop();else{b.setVisible(!0);break}}
function U8d(a){for(var b=ia(a.C),c=b.next();!c.done;c=b.next())A(c.value);a.C=[]}S8d.prototype.Ha=function(){U8d(this);y.prototype.Ha.call(this)};function W8d(a,b,c){b=c||b;b="<div id="+et(a.id)+' class="'+Q("waffle-dataconnector-dbschematreenode")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-label")+(a.Qb?" waffle-dataconnector-dbschematreenode-rtl":"")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-spinner-container")+'">'+O(R2c({yb:!0},b))+"</div>";c=P('<svg class="waffle-dataconnector-expand-icon" width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><polygon id="Shape" points="0 0 18 0 18 18 0 18"></polygon><polygon id="Shape" fill-opacity="0.87" fill="#000000" points="5 7 9 11 13 7"></polygon></g></g></svg>');
a=b+O(c)+'<div class="'+Q("waffle-dataconnector-dbschematreenode-title")+'">'+O(a.title)+'</div></div><div class="'+Q("waffle-dataconnector-dbschematreenode-child-container")+'" role="group"></div></div>';return P(a)};function X8d(a){this.C=a}X8d.prototype.getType=g("C");function Y8d(a){this.C="jdbc-table";this.D=a}r(Y8d,X8d);function B4(a,b,c,d){c=void 0===c?!1:c;M.call(this,d);this.gc(b);this.J=a;this.nextSibling=this.previousSibling=this.parentNode=null;this.H=(this.D=c)?2:0;this.F=this.C=!1}r(B4,M);p=B4.prototype;p.Ca=function(){this.kb(N(W8d,{title:this.J,id:this.getId()}))};p.rb=function(){return this.hb("waffle-dataconnector-dbschematreenode-child-container")};
p.Ia=function(){M.prototype.Ia.call(this);var a=this.Ja("waffle-dataconnector-dbschematreenode-label"),b=this.Ja("waffle-dataconnector-dbschematreenode-title");a.id=this.getId()+"-label";Dk(this.Oa(),"labelledby",a.id);this.D||Dk(this.Oa(),"expanded",this.C);Dk(this.Oa(),"selected",this.F);Ck(this.Oa(),"treeitem");Ck(this.Ja("waffle-dataconnector-dbschematreenode-spinner-container"),"presentation");Ck(this.Ja("waffle-dataconnector-expand-icon"),"presentation");Mk(this.Oa(),"waffle-dataconnector-dbschematreenode-rtl",
this.Wd());uva(this.qa());ym(b,this.J,void 0);Z8d(this,!1);Mk(this.Oa(),"waffle-dataconnector-dbschematreenode-leaf",this.D);this.getHandler().V(a,"click",this.ZHb)};p.getTitle=g("J");p.ZHb=function(){this.Ad(!this.C);this.Yb(!0)};p.Ad=function(a){if(!this.D&&a!=this.C){var b=Tua(64,a);this.dispatchEvent(b)&&Z8d(this,a)}};function Z8d(a,b){a.D||(a.C=b,a.sb()&&(Mk(a.Oa(),"waffle-dataconnector-dbschematreenode-open",a.C),Dk(a.Oa(),"expanded",a.C)))}
p.Yb=function(a){if(a!=this.F){var b=Tua(8,a);this.dispatchEvent(b)&&(this.F=a,this.sb()&&(Mk(this.Oa(),"waffle-dataconnector-dbschematreenode-selected",this.F),Dk(this.Oa(),"selected",a)))}};p.Zn=g("H");p.gc=function(a){M.prototype.gc.call(this,a)};p.Sa=function(){return M.prototype.Sa.call(this)};p.Vc=function(a){return M.prototype.Vc.call(this,a)};p.Lc=function(a){return M.prototype.Lc.call(this,a)};
p.Ga=function(a,b){if(this.D)throw Error("Can't add child to leaf node");M.prototype.Ga.call(this,a,b)};function $8d(a){a.parentNode=null;var b=a.previousSibling,c=a.nextSibling;a.previousSibling=null;a.nextSibling=null;b&&(b.nextSibling=c);c&&(c.previousSibling=b)}p.Mf=function(a,b,c){if(this.D)throw Error("Can't add child to leaf node");var d=this.Lc(b-1),e=this.Lc(b);a.parentNode=this;a.nextSibling=e;if(a.previousSibling=d)d.nextSibling=a;e&&(e.previousSibling=a);M.prototype.Mf.call(this,a,b,c)};
p.removeChild=function(a,b){$8d(a);return M.prototype.removeChild.call(this,a,b)};p.qd=function(){return M.prototype.qd.call(this,!0)};p.Zm=function(a){return M.prototype.Zm.call(this,a,!0)};function a9d(a){var b=a.C.qd(!0);wb(b);b9d(a,!1)}function b9d(a,b){a.sb()&&K(a.Ja("waffle-dataconnector-schema-menu-error-message"),b)};function c9d(a){a9d(a);a.F.setActive(!0);a.H.H().then(function(b){a.F.setActive(!1);b.forEach(function(b){b=b.getName();b=new B4(b,new Y8d(b));b9d(a,!1);a.C.Ga(b,!0)});0==b.length&&b9d(a,!0)},function(){a.F.setActive(!1);b9d(a,!0)})};function d9d(a,b){ot(a.Hc,e9d(a));a.C="vertical"==a.D?qRa(a.Hc,b):rRa(a.Hc,b);var c=ia("vertical"==a.D?[a.C,0]:[0,a.C]);b=c.next().value;c=c.next().value;DH(a.Oa(),b,c,a.Wd());a.dispatchEvent("Yf")}function e9d(a){var b=a.Oa().parentElement.getBoundingClientRect(),c=b.height;b=b.width;"horizontal"==a.D?(b=0,c-=a.Wc()):(c=0,b-=a.Wc());return new al(0,0,b,c)};function f9d(a,b){var c=b.getErrorCode(),d=T(b,3);switch(c){case 20:return g9d(a,d);case 14:return C4('Update parameter "'+(T(b,6).toUpperCase()+'" to reference a cell in the current workbook and try again'));case 15:return C4('Update the cell referenced by parameter "'+(T(b,6).toUpperCase()+'" to be text or a number'));case 16:return C4("Select a parameter name you haven't used before");case 13:return C4('Define your parameter "'+(T(b,6).toUpperCase()+'" and try again'));case 6:return I(H(),"docs-idu")?
(a=new rr,b=a.le("span",{"class":"waffle-dataconnector-error-message"})+("Query timed out. "+(a.le("a",{href:"https://sites.google.com/corp/google.com/sheets-dataconnectors-help/error-messages",target:"_blank"})+("Learn more"+(a.re("a")+a.re("span"))))),a=a.format(b)):a=h9d("Query timed out",d),a;case 8:return I(H(),"docs-idu")?(a=new rr,b="Results exceed "+(i9d+(" rows. Update query and run again. "+(a.le("a",{href:"https://sites.google.com/corp/google.com/sheets-dataconnectors-help/error-messages",
target:"_blank"})+("Learn more"+a.re("a"))))),a=a.format(b),a=C4(a)):a=h9d(j9d,d),a;case 18:return C4("The query returns an ARRAY or a STRUCT type, which is currently not supported.");case 9:return a=new rr,b="Go to Plx to specify an engine other than 'Auto' and try again. "+(a.le("a",{href:"https://sites.google.com/corp/google.com/sheets-dataconnectors-help/error-messages",target:"_blank"})+("Learn more"+a.re("a"))),a=a.format(b),C4(a);case 19:return C4("The query is already in execution.");case 17:return a=
"Can not insert the results of the query: that would increase the number of cells in the workbook above the limit of "+(ih(H(),"fmtc")+" cells."),C4(a);case 22:return C4("Duplicated column names or aliases are not supported. Please update your query.");case 23:return C4("There is no sheet associated with this query.");case 24:return C4("Can not insert the results of the query: exceeds the maximum characters allowed in a single cell.")}return k9d(d)}
function l9d(a){var b=new rr;a=(new ev("To execute this query, {startLink}sign in to your Google account{endLink}")).format({startLink:b.le("a",{href:"#",id:a}),endLink:b.re("a")});return b.format(a)}function g9d(a,b){if(!b)return k9d(b);switch(a){case 2:return C4("Plx error: "+b);case 3:return C4("BigQuery error: "+b);default:return C4("Database error: "+b)}}function k9d(a){return h9d("Something's wrong. Please try again later",a)}var i9d=(new cv(1)).format(1E4),j9d="Results exceed "+(i9d+" rows. Update query and run again.");
function C4(a){return dd("span",{"class":"waffle-dataconnector-error-message"},a)}function h9d(a,b){var c=new rr;b&&(a=a+": "+b);return C4(c.format(a))};function m9d(a){switch(a){case 2:var b=1;break;case 3:b=2;break;default:b=0}a=new l8d;G(a,1,b);b=new Yj;zf(b,91,a);return b};function n9d(){}r(n9d,Zr);n9d.prototype.Pb=n("waffle-dataconnector-queryeditor-removable-chip-remove-button");va(n9d);function o9d(){}r(o9d,Zr);o9d.prototype.Ca=function(a){var b=Zr.prototype.Ca.call(this,a);a.qa().appendChild(b,a.qa().Ca("DIV","waffle-dataconnector-queryeditor-removable-chip-chip-content"));return b};o9d.prototype.rb=function(a){return Kd("waffle-dataconnector-queryeditor-removable-chip-chip-content",a)};o9d.prototype.Pb=n("waffle-dataconnector-queryeditor-removable-chip-button");
va(o9d);var p9d=new Mz;function q9d(a){return a.C.od().map(function(a){return a.Sa()})};function r9d(){y.call(this);this.C=Od()}r(r9d,y);function s9d(a,b){a.C.dataConnectorOnCompleteAuth=b;b=(new ro(a.C.location.href)).resolve(new ro("dbx/ssoLogin")).toString();var c=Md();(a=tr(b,{target:"google_popup",width:500,height:500,top:Math.floor((c.height-500)/2),left:Math.floor((c.width-500)/2),toolbar:!1,menubar:!1,location:!1,statusbar:!1},a.C))&&a.focus()}r9d.prototype.Ha=function(){delete this.C.dataConnectorOnCompleteAuth;y.prototype.Ha.call(this)};function t9d(a){var b=a.lha(),c;if(c=b){a=ia(q9d(a.Wa));for(c=a.next();!c.done;c=a.next())Vv(b,3,c.value);c=b}return c}function u9d(a){a.J.setVisible(!0);var b=Math.min(a.J.Oab().height+16,240);v9d(a,b)}function w9d(a){if(!a.O.enabled){var b=0;x9d(a,b);a.O.V("tick",function(){a.isDisposed()||(b+=.1,x9d(a,b))});a.O.start()}}function x9d(a,b){D4(a,ad("Executing query "+(b.toFixed(1)+"s")))}function y9d(a,b){a.Ta=!1;a.O.stop();a.O.qC();z9d(a,!0);A9d(a,b.Vi());B9d(a)}
function A9d(a,b){10==b.getErrorCode()?C9d(a):D4(a,f9d(a.aC(),b))}function D9d(a){a.Ta=!0;D4(a,ad("Updating workbook"));B9d(a)}function v9d(a,b){var c=void 0===c?!0:c;A(a.va);a.va=null;c?(c=E9d(a),a.va=new F9d(c,b,200,a),a.xa(a.va),a.va.play()):G9d(a,b)}function E9d(a){return a.sb()?xl(a.Ja("waffle-dataconnector-newqueryeditor-preview-pane")).height:0}function G9d(a,b){var c=a.Ja("waffle-dataconnector-newqueryeditor-main");b=xl(c).height-a.F.Wc()-b;d9d(a.F,b)}
function B9d(a){var b=t9d(a),c=a.Za.C;a.Ta||null==b||c?(a.Ma.Pa(!1),a.ma.Pa(!1)):(a.ma.Pa(!0),a.Ma.Pa(!0));b=a.cb&&a.cb.equals(b);a.J.Roa(!b)}function H9d(a){var b=new aZ;a=t9d(a);U(b,1,a);U(b,2,30);return b}function C9d(a){var b="waffle-dataconnector-ssologin-"+Zb(),c=l9d(b);D4(a,c);(b=Hd(b))&&a.getHandler().V(b,"click",function(){return I9d(a)})}function I9d(a){s9d(a.Nc,function(){z9d(a,!1);WE.zb(H9d(a),a.Zv)})}
function D4(a,b,c){c=void 0===c?!0:c;a=a.Ja("waffle-dataconnector-newqueryeditor-footer-message");hd(a,b);c&&QI(he(a))}function z9d(a,b){a.sb()&&Mk(a.Ja("waffle-dataconnector-newqueryeditor-footer-message-container"),"waffle-dataconnector-newqueryeditor-unhandled-error",b)}function F9d(a,b,c,d){Ou.call(this,[a],[b],c);this.F=d}r(F9d,Ou);F9d.prototype.o8=function(){G9d(this.F,this.coords[0])};F9d.prototype.H=function(){G9d(this.F,this.iO[0])};
var J9d=new rr,K9d="Inserted data is visible to all. The query is visible only to people with edit access. "+(J9d.le("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+J9d.re("a"))),L9d=J9d.format(K9d);function M9d(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-button")+'">';var b=P('<svg class="waffle-dataconnector-info-icon-filled" fill="#000000" fill-opacity="0.54" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>');
a=a+O(b)+'</span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-message")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-spinner")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")+'">';a+="Error";b=P('<svg class="waffle-dataconnector-refresh-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><polygon points="0 0 18 0 18 18 0 18"/><path fill="#000" d="M9,13.5 C6.51,13.5 4.5,11.49 4.5,9 C4.5,6.51 6.51,4.5 9,4.5 C10.24,4.5 11.36,5.02 12.17,5.83 L10,8 L15,8 L15,3 L13.24,4.76 C12.15,3.68 10.66,3 9,3 C5.69,3 3.01,5.69 3.01,9 C3.01,12.31 5.69,15 9,15 C11.97,15 14.43,12.84 14.9,10 L13.38,10 C12.92,12 11.14,13.5 9,13.5 L9,13.5 Z"/></g></svg>');
a+="</span></span>"+O(b);return P(a+"Refresh query</div>")}
function N9d(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-editquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'">';var b=P('<svg class="waffle-dataconnector-edit-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');a+=O(b);return P(a+
"Edit query</div>")}function O9d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-viewerror")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(r8d({color:"#000000"},b));return P(a+"View error</div>")}function P9d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-bigquery-helpdoc")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(s8d(null,b));return P(a+"Learn more about BigQuery</div>")};function Q9d(a,b,c,d){In.call(this,N(M9d),a,d);this.Da=b;this.R=c;this.O=Rm(new Qm,72).build();this.C=new $r(void 0,Wl(Zr,"waffle-dataconnector-pill-menuitem-refreshquery-info-button"),this.qa());this.Ga(this.C);this.F=new $r(void 0,Wl(Zr,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"),this.qa());this.Ga(this.F);this.H=!1;this.Fv(73)}r(Q9d,In);p=Q9d.prototype;
p.Ia=function(){In.prototype.Ia.call(this);J(this.Oa(),"waffle-dataconnector-pill-menuitem-refreshquery");this.C.Va(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-button"));vn(this.C,"To show the query info, press I.");this.C.Hd("Show the query info");this.F.Va(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"));this.reset();this.getHandler().V(this.C,"action",this.hGa).V(this.F,"action",this.XHb)};
p.wh=function(a){return a.keyCode==this.iR?(this.H&&this.hGa(null),!0):In.prototype.wh.call(this,a)};p.Dg=function(a){if(a&&Qd(a.target)){var b=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info");if(de(b,a.target))return!0}return In.prototype.Dg.call(this,a)};p.refresh=function(a){this.H=a;this.reset()};
p.reset=function(){K(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info"),this.H);if(this.H){R9d(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-button");var a=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");hd(a,fd)}};p.XHb=function(a){a.stopPropagation();Zsb.zb(void 0,this.O)};
p.hGa=function(a){var b=this;a&&a.stopPropagation();R9d(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-spinner");this.R.C(35737,this.O);S9d(this).then(function(a){a=T(a,2);return T9d(a).then(function(a){a=T(T(a,5),1);a=B8d(a);var c=b.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");hd(c,ad(a));R9d(b,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");QI(a)},function(){return U9d(b)})},function(){return U9d(b)})};
function U9d(a){R9d(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")}function S9d(a){var b=new i9c;U(b,1,a.Da);return i8d(AZ.getInstance(),b)}function T9d(a){T(a,6);var b=new aZ;a=a.clone();U(b,1,a);U(b,2,1);U(b,4,!0);return e8d(AZ.getInstance(),b)}
function R9d(a,b){["waffle-dataconnector-pill-menuitem-refreshquery-info-button","waffle-dataconnector-pill-menuitem-refreshquery-info-message","waffle-dataconnector-pill-menuitem-refreshquery-info-spinner","waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"].forEach(function(b){return K(a.Ja(b),!1)});K(a.Ja(b),!0);a.C.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-button"==b);a.F.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"==b)}
;function V9d(a,b,c,d){c=void 0===c?!1:c;qZ.call(this,Rs(t8d,{opacity:.54}),new Nn(d),W9d.getInstance(),d);this.H=a;this.ma=c;this.ea=b;this.R=Sm(Rm(new Qm,72),m9d(ritz_api.DbxApi.getTypeOfQuery(this.H))).build();this.F={};this.F["refresh-query"]=new Q9d("refresh-query",this.H,this.ea,this.qa());this.ad(this.F["refresh-query"]);this.F["edit-query"]=new In(N(N9d),"edit-query",this.qa());this.ad(this.F["edit-query"]);this.F["view-error"]=new In(N(O9d),"view-error",this.qa());this.ad(this.F["view-error"]);
this.F["menu-separator"]=new Mn(this.qa());this.ad(this.F["menu-separator"]);this.F["bigquery-helpdoc"]=new In(N(P9d),"bigquery-helpdoc",this.qa());this.ad(this.F["bigquery-helpdoc"]);this.getHandler().V(this.Xb(),"action",this.Na)}r(V9d,qZ);V9d.prototype.Ia=function(){qZ.prototype.Ia.call(this);J(this.Xb().getElement(),"waffle-dataconnector-pill-menu");$Cc(this,new Wm(this.Oa(),this.ma?4:0));this.Qw=!0};V9d.prototype.Na=function(a){a=a.target.Sa();(a=X9d[a])&&a.zb(void 0,this.R)};
V9d.prototype.refresh=function(a){var b=[];switch(a){case 2:b.push("edit-query");b.push("refresh-query");break;case 3:b.push("view-error")}if(a=3==ritz_api.DbxApi.getTypeOfQuery(this.H))b.push("menu-separator"),b.push("bigquery-helpdoc");this.F["refresh-query"].refresh(a);a=ia(Object.values(this.F));for(var c=a.next();!c.done;c=a.next())c.value.setVisible(!1);b=ia(b);for(a=b.next();!a.done;a=b.next())this.F[a.value].setVisible(!0)};
V9d.prototype.Ad=function(a,b){if(a){var c=this.Xb();if(c&&c.sb()){c=ia(Object.values(this.F));for(var d=c.next();!d.done;d=c.next())d=d.value,d.reset&&d.reset()}}qZ.prototype.Ad.call(this,a,b)};var Y9d={},X9d=(Y9d["bigquery-helpdoc"]=Msb,Y9d["edit-query"]=Qsb,Y9d["refresh-query"]=Xsb,Y9d["view-error"]=Zsb,Y9d);function W9d(){}r(W9d,H9c);W9d.prototype.Qp=function(a){return a.Ca("DIV",{style:"display:none;"})};va(W9d);function Z9d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill")+'" tabindex="0"><div class="'+Q("waffle-dataconnector-pill-info")+'"><div class="'+Q("waffle-dataconnector-pill-timestamp")+'"></div><div class="'+Q("waffle-dataconnector-pill-progress")+'"><div class="'+Q("waffle-dataconnector-pill-spinner")+'"></div><span class="'+Q("waffle-dataconnector-pill-progress-message")+'">';a=a+"Running query..."+(' </span></div><div class="'+Q("waffle-dataconnector-pill-error")+'">'+O(r8d(null,
b)));a=a+"Execution error"+('</div></div><div class="'+Q("waffle-dataconnector-pill-editquery-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-refresh-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-menu-button-wrapper")+'"></div></div>');return P(a)};function $9d(a,b,c,d,e,f,h){f=void 0===f?!1:f;M.call(this,h);this.O=a;this.Da=b;this.va=c;this.H=f;this.R=d;this.ma=e;b=ritz_api.DbxApi.getTypeOfQuery(a);this.L=Sm(Rm(new Qm,72),m9d(b)).build();this.ea=new a$d;this.J=new Cm;this.xa(this.J);this.F=new yX;this.Ga(this.F);this.F.Bd("waffle-dataconnector-pill-editquery-button");Im(this.J,this.F,Qsb,Km,void 0,this.L);this.D=new yX("Refresh");this.D.Bd("waffle-dataconnector-pill-refresh-button");this.Ga(this.D);this.C=new V9d(a,this.ma,this.H,this.qa());
this.C.Bd("waffle-dataconnector-pill-menu-button");this.Ga(this.C)}r($9d,M);p=$9d.prototype;p.Ca=function(){this.kb(N(Z9d))};
p.Ia=function(){var a=this;M.prototype.Ia.call(this);Ck(this.Oa(),"toolbar");var b=this.getId()+":label";this.Ja("waffle-dataconnector-pill-info").id=b;Dk(this.Oa(),"labelledby",b);this.F.render(this.Ja("waffle-dataconnector-pill-editquery-button-wrapper"));this.D.render(this.Ja("waffle-dataconnector-pill-refresh-button-wrapper"));this.C.render(this.Ja("waffle-dataconnector-pill-menu-button-wrapper"));ym(this.C.Oa(),"More options",void 0);this.getHandler().V(this.D,"action",this.awb).V(pe(this.qa()),
"focus",this.refresh).V(this.Oa(),"keydown",function(a){var b=a.keyCode;37!=b&&39!=b||a.preventDefault()});C.Oo&&C.product.Lo&&this.getHandler().V(this.Oa(),"focus",function(){el(a.Oa(),{outline:"1px dotted black"})}).V(this.Oa(),"blur",function(){el(a.Oa(),{outline:"0"})});this.refresh();b=new PQ(this.Oa(),this.qa());this.xa(b);QQ(b)};p.Ha=function(){M.prototype.Ha.call(this)};p.$c=function(){this.va.$c(this.Oa(),this.H?5:1,new $k(0,this.H?50:0,12,this.H?0:50))};
p.refresh=function(){var a=R8d(this.R,this.O);a=a?a.getState():2;var b=Rsb.isEnabled();switch(a){case 5:case 1:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!0);K(this.Ja("waffle-dataconnector-pill-error"),!1);this.F.setVisible(!1);this.D.setVisible(!1);this.D.Pa(!1);this.C.setVisible(!1);break;case 4:case 2:K(this.Ja("waffle-dataconnector-pill-timestamp"),!0);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),
!1);b$d(this);this.F.setVisible(!1);this.D.setVisible(b);this.D.Pa(b);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);break;case 3:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),!0);this.F.setVisible(b);this.D.setVisible(!1);this.D.Pa(!1);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);b||(K(this.Ja("waffle-dataconnector-pill-timestamp"),!0),K(this.Ja("waffle-dataconnector-pill-error"),
!1),b$d(this));break;default:KKc("Unrecognized execution state: "+a)}this.$c()};function b$d(a){var b=ritz_api.DbxApi.getLastExecutionTimeForSheet(a.Da);0>=b||(b="Updated "+a.ea.format(b),a=a.Ja("waffle-dataconnector-pill-timestamp"),fe(a,b))}p.awb=function(){this.D.Pa(!1);Xsb.zb(void 0,this.L)};p.focus=function(){this.Oa().focus()};function a$d(){this.C=new Xu(1);this.D=new Xu($u.MONTH_DAY_MEDIUM);this.F=new Xu(7)}
a$d.prototype.format=function(a){a=new Date(a);var b=new Date,c;0<b.getFullYear()-a.getFullYear()?c=this.C.format(a):a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?c="today":c=this.D.format(a);a=this.F.format(a);return c+(", "+a)};function c$d(a,b,c,d,e,f,h){y.call(this);this.D=a;this.H=b;this.L=c;this.ea=d;this.J=e;this.La=new Pk(this);this.xa(this.La);this.F=new ye(this);this.xa(this.F);this.O=f;this.R=h;this.C=null;this.La.V(this.L,"F",this.VHb).V(this.D,"fb",this.WHb).V(this.D,"gb",this.kyb).V(this.ea,"db-execution-status-updated",this.UHb).V(this.D,"yb",this.refresh);this.F.subscribe(Ssb,"action",this.Dnb)}r(c$d,y);p=c$d.prototype;p.Ha=function(){y.prototype.Ha.call(this);A(this.C)};p.refresh=function(){d$d(this)};
p.VHb=function(){this.C&&this.C.$c()};p.WHb=function(){d$d(this)};p.kyb=function(){A(this.C);this.C=null};p.Dnb=function(){this.C&&(this.C.focus(),this.O.tb(2))};function d$d(a){var b=a.D.C.C;if(b&&oJ(b))if(a.C)a.C.refresh();else{var c=dJ(a.H);if(c){b=c.Wd();c=new Wm(c.Ka.J,b?5:1);var d=a.D.C.C,e=T(d.H,1);d=d.jb();a.C=new $9d(e,d,c,a.J,a.R,b);a.C.render()}}}p.UHb=function(a){a.F&&0!=a.F.length&&this.C&&bb(a.F,this.C.O)&&this.C.refresh()};function e$d(a,b,c,d){y.call(this);this.R=a;this.ea=b;this.ma=c;this.J=this.L=null;this.H=d||null;this.C=3;this.O=new f$d;this.D=this.F=null}r(e$d,y);p=e$d.prototype;p.getId=function(){return Ca(this)};p.Ha=function(){this.stop();y.prototype.Ha.call(this)};p.start=function(){this.C=2;this.D=this.F=null;this.nza(this.R)};p.stop=function(){2==this.C&&(this.C=3,this.O.stop())};function g$d(a,b){a.L=b;return a}function h$d(a,b){a.J=b;return a}
p.nza=function(a){var b=this;this.ea.call(this.H,a).then(function(a){if(2==b.C){b.F=a;b.D=null;var c=b.ma.call(b.H,a);if(c){a:{a=b.O;c=u(b.nza,b,c);if(10>a.F){a.F++;var e=1E3}else if(60>a.D)a.D++,e=5E3;else{a=!1;break a}e+=Math.round(.2*e*(Math.random()-.5)*2);a.C=gm(c,e);a=!0}a||i$d(b,Error("Polling timed out"))}else b.stop(),b.C=4,b.F=a,b.D=null,b.L&&b.L.call(b.H,a)}},function(a){2==b.C&&i$d(b,a)})};function i$d(a,b){a.stop();a.C=1;a.F=null;a.D=b;a.J&&a.J.call(a.H,b)}p.getStatus=g("C");p.$E=g("D");
function f$d(){this.D=this.F=0;this.C=null}f$d.prototype.stop=function(){this.D=this.F=0;jm(this.C);this.C=null};function j$d(a){this.C=a}function k$d(a,b){var c=T(b,1);return new e$d(b,function(b){return e8d(a.C,b)},function(a){if(1==a.Vi().getState()){var b=new aZ;U(b,1,c);b.setToken(a.Vi().getToken());return b}return null})};var l$d=Object.freeze({caption:"Dremel",value:"DREMEL"}),m$d=Object.freeze({caption:"F1",value:"F1"}),n$d=Object.freeze({caption:"Procella",value:"PROCELLA"});function o$d(a,b,c,d){var e="Error in query on "+c;c=new I8d;c.Bd("waffle-dataconnector-error-popup");tt(c,e);c.C.setContent("Open query editor");c.J.setContent("Ok");a=10==a.getErrorCode()?l9d(d):f9d(b,a);ut(c,a);return c};function p$d(a,b,c,d,e,f,h,k,l){y.call(this);var m=this;this.L=new P8d;this.xa(this.L);this.D=AZ.getInstance();this.va=new j$d(this.D);this.F=b;this.ea=f;this.O=l;this.C=new S8d(f);this.H=new c$d(b,c,d,a,this.L,e,this.O);this.xa(this.H);this.La=new Pk(this);this.xa(this.La);this.R=new ye(this);this.xa(this.R);this.ma=new r9d;this.xa(this.ma);q$d(this,k);this.La.V(this.C.D,["show","hide"],this.Rkb);this.La.V(this.C.D,["Wf"],this.Rpb);r$d(this);this.H.refresh();this.J=new Ze;sE("queryeditor",function(){var b=
vE("queryeditor");m.J.callback(b.C(h,a,m.D,m.ea,m.O,d))})}r(p$d,y);
function q$d(a,b){var c=emc(),d=new jv(LS.concat(["waffle-dataconnector-connection-selected"])),e=new jv(["waffle-dataconnector-active-sheet-db-connection","embedded-object-unfocused"]),f=LS.concat(["waffle-dataconnector-active-sheet-db-connection","sheet-access-no-protected-range-for-sheet"]);c||f.push("waffle-dataconnector-active-sheet-not-plx");c=new jv(f);Nsb.Pa(!0);b.C(UE,MS).F(UE,MS).C(VE,MS).F(VE,MS).C(Xsb,c).C(Qsb,c).C(WE,MS).C(Ysb,d).C(Vsb,c).C(Zsb,c).C(Ssb,e);b.C(Rsb,c);a.R.wb(Rsb,Ma,function(){a.H.refresh()});
I(H(),"fedp")&&b.C(Psb,MS).F(Psb,MS)}function r$d(a){a.R.subscribe(Nsb,"action",function(){V8d(a.C)}).subscribe(WE,"action",a.Wub).subscribe(UE,"action",a.Vjb).subscribe(Psb,"action",a.Ujb).subscribe(Xsb,"action",a.$vb).subscribe(Qsb,"action",a.ana).subscribe(VE,"action",a.gmb).subscribe(Vsb,"action",a.ntb).subscribe(Zsb,"action",a.ana).subscribe(Msb,"action",a.ktb)}p=p$d.prototype;p.cf=function(a){this.D.cf(a)};p.Rkb=function(){var a=T8d(this.C);a&&a.isVisible()||(WE.setValue(null),Ysb.setValue(null))};
p.mLa=function(a){var b=this;a=void 0===a?!1:a;var c=new N8d;this.xa(c);A4(this.C,c,!a);c.getResult().then(function(c){var d=a,f=c.getId();c=c.getName();if(d){V8d(b.C);d=T8d(b.C);d.qc=f;d.Ra=!0;-1!=he(y8d(d)).indexOf("A managed data source is missing under query settings")&&D4(d,dd("span"));var h=d.L;h.F=c;fe(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),c);Mk(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),"waffle-dataconnector-jdbc-query-settings-widget-connection-name-error",
!1);d.L.Ad(!0);d.Ud.J(f);c9d(d.ib);d.rG()}else s$d(b,f,c)},function(){V8d(b.C)})};p.R1a=function(){var a=t$d("Connecting to Plx...");u$d(this);nr(mr.getInstance(),a)};p.Q1a=function(){var a=this,b=t$d("Connecting to BigQuery...");H8d(new G8d(this.D)).then(function(c){nr(mr.getInstance(),b);v$d(a,c)},function(){nr(mr.getInstance(),b);w$d("Could not connect to BigQuery")})};p.LOb=function(){x$d(this,[],!1)};
function v$d(a,b){b=new m8d(b);var c=new D8d(b);a.xa(c);A4(a.C,c);c.getResult().then(function(b){y$d(a,b)},function(){a.O.C(35753);A(c)})}function t$d(a){return mr.getInstance().postMessage(or(a,"info",!0))}function w$d(a){mr.getInstance().postMessage(or(a,"error",!0))}function s$d(a,b,c){a.J.addCallback(function(d){d=d.oab(b,c);a.xa(d);A4(a.C,d)})}function y$d(a,b){a.J.addCallback(function(c){c=c.nab(b);a.xa(c);A4(a.C,c)})}
function u$d(a){a.J.addCallback(function(b){b=b.pab();a.xa(b);A4(a.C,b)})}
p.Wub=function(a){var b=T8d(this.C);b.Ta=!0;D4(b,ad("Executing query"));B9d(b);w9d(b);var c=T(a,1);h$d(g$d(k$d(this.va,a),function(a){if(!b.isDisposed()){b.O.stop();b.O.qC();z9d(b,!1);b.Ta=!1;b.cb=c;var d=1E4<T(a,3)||!!T(a,4);b.Vb=d;if(!b.isDisposed()){d=b.Vb;var f=T(a,3);d=d?T(a,4)?"Query returns more than "+(A8d.format(f)+(" rows of data. Please revise your query to return no more than "+(A8d.format(1E4)+" rows."))):"Query returns "+(A8d.format(f)+(" rows of data. Please revise your query to return no more than "+
(A8d.format(1E4)+" rows."))):(new ev("{TOTAL_ROWS, plural, =0 {Query returns no results.}=1 {Query returns 1 row of data.}other {Query returns # rows of data.}}")).format({TOTAL_ROWS:f});d=dd("strong",void 0,d);d=ed(d,dd("br"),L9d);D4(b,d)}b.J.bPb(T(a,2));u9d(b);b.ma.setContent("Refresh preview");B9d(b)}}),function(a){b.isDisposed()||y9d(b,a)}).start()};p.Vjb=function(a){z$d(this,1,a)};p.Ujb=function(a){z$d(this,2,a)};
function z$d(a,b,c){var d=T8d(a.C);U(c,2,b);d8d(a.D,c).then(function(c){A$d(a,c);2==b&&JBb()},function(a){d.isDisposed()||y9d(d,a)});D9d(d)}function A$d(a,b){Q8d(a.L,T(b,2),b.Vi());var c=b.jb();U8d(a.C);GK(a.F,c)?JK(a.F.C)==c?a.H.refresh():LK(a.F,c,void 0,{nC:!0}):a.La.Kc(a.F,["qb","fb"],function(b){"qb"==b.type&&b.yh==c&&LK(a.F,c,void 0,{nC:!0})})}p.$vb=function(){x$d(this,[jN(this.F.C)],!0)};
function x$d(a,b,c){var d=new M8c;b.forEach(function(a){Vv(d,1,a)});f8d(a.D,d).then(function(b){B$d(a,Xv(b,1));a.H.refresh()},function(b){return C$d(a,b,c)})}function C$d(a,b,c){var d=[],e=[];Xv(b,1).forEach(function(a){return 3==a.Vi().getState()?e.push(a):d.push(a)});B$d(a,d);a.H.refresh();c&&(b=e[0],c=b.Vi(),c.getErrorCode(),D$d(a,b.jb(),c))}function B$d(a,b){b.forEach(function(b){var c=GK(a.F,b.jb());if(c=c&&c.H)c=T(c,1),b=b.Vi(),a.L.C[c]=b})}
function D$d(a,b,c){var d=GK(a.F,b),e=d&&d.H;if(e){d=d.Yd();e=ritz_api.DbxApi.getTypeOfQuery(T(e,1));var f="waffle-dataconnector-ssologin-"+Zb(),h=o$d(c,e,d,f);a.xa(h);a.ea.Bh(h);h.render();h.setVisible(!0);h.getResult().then(function(){A(h);a.ana(b)},function(){A(h)});(c=Hd(f))&&z4.prototype.getHandler.call(h).V(c,"click",function(){E$d(a,b,h)})}}function E$d(a,b,c){s9d(a.ma,function(){A(c);x$d(a,[b],!0)})}
p.ana=function(a){if((a=void 0!==a?GK(this.F,a):this.F.C.C)&&oJ(a)){var b=a.H;a=T(b,1);switch(ritz_api.DbxApi.getTypeOfQuery(a)){case 2:F$d(this,a);break;case 1:b=T(b,2);G$d(this,b,a);break;case 3:H$d(this,a)}}};
function G$d(a,b,c){var d=I$d(a,c),e=J$d(a,b),f=K$d(a,c);a.J.addCallback(function(h){var k=t$d("Loading query...");Ue([d,e,f]).then(function(d){var e=d[0],f=d[1]?d[1]:null;f=f?f.getName():null;d=h.sab(b,f,c,e,d[2]?d[2]:null);a.xa(d);nr(mr.getInstance(),k);A4(a.C,d)},function(){nr(mr.getInstance(),k);w$d("Could not load query")})})}
function F$d(a,b){var c=I$d(a,b),d=K$d(a,b);a.J.addCallback(function(e){var f=t$d("Loading query...");Ue([c,d]).then(function(c){c=e.uab(b,c[0],c[1]?c[1]:null);a.xa(c);nr(mr.getInstance(),f);A4(a.C,c)},function(){nr(mr.getInstance(),f);w$d("Could not load query")})})}
function H$d(a,b){var c=H8d(new G8d(a.D)),d=I$d(a,b),e=K$d(a,b);a.J.addCallback(function(f){var h=t$d("Connecting to BigQuery...");Ue([d,e,c]).then(function(c){var d=c[0],e=c[1]?c[1]:null;c=c[2];var k=T(d,4).im();c=new m8d(c,k);d=f.rab(c,b,d,e);nr(mr.getInstance(),h);A4(a.C,d)},function(){nr(mr.getInstance(),h);w$d("Could not load query")})})}function I$d(a,b){var c=Ve(),d=new i9c;U(d,1,b);i8d(a.D,d).then(function(a){c.resolve(T(a,2))},function(a){return c.reject(a)});return c.C}
function J$d(a,b){var c=Ve(),d=new p9c;U(d,1,b);k8d(a.D,d).then(function(a){c.resolve(T(a,1))},function(){return c.resolve(null)});return c.C}function K$d(a,b){var c=R8d(a.L,b);if(!c||3!=c.getState())return Se(null);c=new m9c;U(c,1,b);return a.D.Vi(c).then(function(a){return a.Vi()})}
p.gmb=function(a){var b=this,c=T(a,1),d=T8d(this.C);g8d(this.D,a).then(function(a){a=a.Vi();b.L.C[c]=a;a=ritz_api.DbxApi.getSheetIdForQuery(c);LK(b.F,a,void 0,{nC:!0});U8d(b.C);b.H.refresh()},function(a){d.isDisposed()||y9d(d,a)});D9d(d)};p.ntb=function(){var a=this,b=this.F.C.C,c=T(b.H,1),d=new m9c;U(d,1,c);this.D.Vi(d).then(function(c){(c=c.Vi())&&3==c.getState()&&D$d(a,b.jb(),c)})};p.ktb=function(){tr("https://cloud.google.com/bigquery/docs/projects")};p.Rpb=function(){this.mLa(!0)};function L$d(){y.call(this)}r(L$d,oE);L$d.prototype.C=function(){return p$d};uE("dataconnector",L$d);
